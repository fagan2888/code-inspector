<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Forecasting using stl objects — forecast.stl • forecast</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">forecast</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="https://cran.r-project.org/web/packages/forecast/vignettes/JSS2008.pdf">JSS paper</a>
</li>
<li>
  <a href="../news/index.html">Change Log</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/robjhyndman/forecast">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Forecasting using stl objects</h1>
    </div>

    
    <p>Forecasts of STL objects are obtained by applying a non-seasonal forecasting
method to the seasonally adjusted data and re-seasonalizing using the last
year of the seasonal component.</p>
    

    <pre class="usage"><span class='co'># S3 method for stl</span>
<span class='fu'><a href='forecast.html'>forecast</a></span>(<span class='no'>object</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"ets"</span>, <span class='st'>"arima"</span>, <span class='st'>"naive"</span>, <span class='st'>"rwdrift"</span>),
  <span class='kw'>etsmodel</span> <span class='kw'>=</span> <span class='st'>"ZZN"</span>, <span class='kw'>forecastfunction</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>h</span> <span class='kw'>=</span> <span class='fu'>frequency</span>(<span class='no'>object</span>$<span class='no'>time.series</span>) * <span class='fl'>2</span>, <span class='kw'>level</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>80</span>, <span class='fl'>95</span>), <span class='kw'>fan</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>lambda</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>biasadj</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>xreg</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>newxreg</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>allow.multiplicative.trend</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)

<span class='fu'>stlm</span>(<span class='no'>y</span>, <span class='kw'>s.window</span> <span class='kw'>=</span> <span class='fl'>7</span>, <span class='kw'>robust</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"ets"</span>, <span class='st'>"arima"</span>),
  <span class='kw'>modelfunction</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>model</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>etsmodel</span> <span class='kw'>=</span> <span class='st'>"ZZN"</span>, <span class='kw'>lambda</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>biasadj</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>xreg</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>allow.multiplicative.trend</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>y</span>, <span class='no'>...</span>)

<span class='co'># S3 method for stlm</span>
<span class='fu'><a href='forecast.html'>forecast</a></span>(<span class='no'>object</span>, <span class='kw'>h</span> <span class='kw'>=</span> <span class='fl'>2</span> * <span class='no'>object</span>$<span class='no'>m</span>, <span class='kw'>level</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>80</span>, <span class='fl'>95</span>),
  <span class='kw'>fan</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>lambda</span> <span class='kw'>=</span> <span class='no'>object</span>$<span class='no'>lambda</span>, <span class='kw'>biasadj</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>newxreg</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>allow.multiplicative.trend</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)

<span class='fu'>stlf</span>(<span class='no'>y</span>, <span class='kw'>h</span> <span class='kw'>=</span> <span class='fu'>frequency</span>(<span class='no'>x</span>) * <span class='fl'>2</span>, <span class='kw'>s.window</span> <span class='kw'>=</span> <span class='fl'>7</span>, <span class='kw'>t.window</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>robust</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>lambda</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>biasadj</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>y</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>An object of class <code>stl</code> or <code>stlm</code>. Usually the
result of a call to <code><a href='http://www.rdocumentation.org/packages/stats/topics/stl'>stl</a></code> or <code>stlm</code>.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Method to use for forecasting the seasonally adjusted series.</p></td>
    </tr>
    <tr>
      <th>etsmodel</th>
      <td><p>The ets model specification passed to
<code><a href='ets.html'>ets</a></code>. By default it allows any non-seasonal model. If
<code>method!="ets"</code>, this argument is ignored.</p></td>
    </tr>
    <tr>
      <th>forecastfunction</th>
      <td><p>An alternative way of specifying the function for
forecasting the seasonally adjusted series. If <code>forecastfunction</code> is
not <code>NULL</code>, then <code>method</code> is ignored. Otherwise <code>method</code> is
used to specify the forecasting method to be used.</p></td>
    </tr>
    <tr>
      <th>h</th>
      <td><p>Number of periods for forecasting.</p></td>
    </tr>
    <tr>
      <th>level</th>
      <td><p>Confidence level for prediction intervals.</p></td>
    </tr>
    <tr>
      <th>fan</th>
      <td><p>If <code>TRUE</code>, level is set to seq(51,99,by=3). This is suitable
for fan plots.</p></td>
    </tr>
    <tr>
      <th>lambda</th>
      <td><p>Box-Cox transformation parameter. Ignored if <code>NULL</code>.
Otherwise, data transformed before decomposition and back-transformed after
forecasts are computed.</p></td>
    </tr>
    <tr>
      <th>biasadj</th>
      <td><p>Use adjusted back-transformed mean for Box-Cox
transformations. If TRUE, point forecasts and fitted values are mean
forecast. Otherwise, these points can be considered the median of the
forecast densities.</p></td>
    </tr>
    <tr>
      <th>xreg</th>
      <td><p>Historical regressors to be used in
<code><a href='auto.arima.html'>auto.arima</a>()</code> when <code>method=="arima"</code>.</p></td>
    </tr>
    <tr>
      <th>newxreg</th>
      <td><p>Future regressors to be used in
<code><a href='forecast.Arima.html'>forecast.Arima</a>()</code>.</p></td>
    </tr>
    <tr>
      <th>allow.multiplicative.trend</th>
      <td><p>If TRUE, then ETS models with
multiplicative trends are allowed. Otherwise, only additive or no trend ETS
models are permitted.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other arguments passed to <code>forecast.stl</code>,
<code>modelfunction</code> or <code>forecastfunction</code>.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>A univariate numeric time series of class <code>ts</code></p></td>
    </tr>
    <tr>
      <th>s.window</th>
      <td><p>Either the character string ``periodic'' or the span (in
lags) of the loess window for seasonal extraction.</p></td>
    </tr>
    <tr>
      <th>robust</th>
      <td><p>If <code>TRUE</code>, robust fitting will used in the loess
procedure within <code><a href='http://www.rdocumentation.org/packages/stats/topics/stl'>stl</a></code>.</p></td>
    </tr>
    <tr>
      <th>modelfunction</th>
      <td><p>An alternative way of specifying the function for
modelling the seasonally adjusted series. If <code>modelfunction</code> is not
<code>NULL</code>, then <code>method</code> is ignored. Otherwise <code>method</code> is used
to specify the time series model to be used.</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>Output from a previous call to <code>stlm</code>. If a <code>stlm</code>
model is passed, this same model is fitted to y without re-estimating any
parameters.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>Deprecated. Included for backwards compatibility.</p></td>
    </tr>
    <tr>
      <th>t.window</th>
      <td><p>A number to control the smoothness of the trend. See
<code><a href='http://www.rdocumentation.org/packages/stats/topics/stl'>stl</a></code> for details.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>stlm</code> returns an object of class <code>stlm</code>. The other
functions return objects of class <code>forecast</code>.</p>
<p>There are many methods for working with <code><a href='forecast.html'>forecast</a></code> objects
including <code>summary</code> to obtain and print a summary of the results, while
<code>plot</code> produces a plot of the forecasts and prediction intervals. The
generic accessor functions <code>fitted.values</code> and <code>residuals</code> extract
useful features.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>stlm</code> takes a time series <code>y</code>, applies an STL decomposition, and
models the seasonally adjusted data using the model passed as
<code>modelfunction</code> or specified using <code>method</code>. It returns an object
that includes the original STL decomposition and a time series model fitted
to the seasonally adjusted data. This object can be passed to the
<code>forecast.stlm</code> for forecasting.
    <code>forecast.stlm</code> forecasts the seasonally adjusted data, then
re-seasonalizes the results by adding back the last year of the estimated
seasonal component.
    <code>stlf</code> combines <code>stlm</code> and <code>forecast.stlm</code>. It takes a
<code>ts</code> argument, applies an STL decomposition, models the seasonally
adjusted data, reseasonalizes, and returns the forecasts. However, it allows
more general forecasting methods to be specified via
<code>forecastfunction</code>.
    <code>forecast.stl</code> is similar to <code>stlf</code> except that it takes the STL
decomposition as the first argument, instead of the time series.</p>
<p>Note that the prediction intervals ignore the uncertainty associated with
the seasonal component. They are computed using the prediction intervals
from the seasonally adjusted series, which are then reseasonalized using the
last year of the seasonal component. The uncertainty in the seasonal
component is ignored.</p>
<p>The time series model for the seasonally adjusted data can be specified in
<code>stlm</code> using either <code>method</code> or <code>modelfunction</code>. The
<code>method</code> argument provides a shorthand way of specifying
<code>modelfunction</code> for a few special cases. More generally,
<code>modelfunction</code> can be any function with first argument a <code>ts</code>
object, that returns an object that can be passed to <code><a href='forecast.html'>forecast</a></code>.
For example, <code>forecastfunction=ar</code> uses the <code>ar</code> function
for modelling the seasonally adjusted series.</p>
<p>The forecasting method for the seasonally adjusted data can be specified in
<code>stlf</code> and <code>forecast.stl</code> using either <code>method</code> or
<code>forecastfunction</code>. The <code>method</code> argument provides a shorthand way
of specifying <code>forecastfunction</code> for a few special cases. More
generally, <code>forecastfunction</code> can be any function with first argument a
<code>ts</code> object, and other <code>h</code> and <code>level</code>, which returns an
object of class <code><a href='forecast.html'>forecast</a></code>. For example,
<code>forecastfunction=thetaf</code> uses the <code><a href='thetaf.html'>thetaf</a></code> function for
forecasting the seasonally adjusted series.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='http://www.rdocumentation.org/packages/stats/topics/stl'>stl</a></code>, <code><a href='forecast.ets.html'>forecast.ets</a></code>,
<code><a href='forecast.Arima.html'>forecast.Arima</a></code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='no'>tsmod</span> <span class='kw'>&lt;-</span> <span class='fu'>stlm</span>(<span class='no'>USAccDeaths</span>, <span class='kw'>modelfunction</span><span class='kw'>=</span><span class='no'>ar</span>)
<span class='fu'>plot</span>(<span class='fu'><a href='forecast.html'>forecast</a></span>(<span class='no'>tsmod</span>, <span class='kw'>h</span><span class='kw'>=</span><span class='fl'>36</span>))</div><div class='img'><img src='forecast.stl-1.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>
<span class='no'>decomp</span> <span class='kw'>&lt;-</span> <span class='fu'>stl</span>(<span class='no'>USAccDeaths</span>,<span class='kw'>s.window</span><span class='kw'>=</span><span class='st'>"periodic"</span>)
<span class='fu'>plot</span>(<span class='fu'><a href='forecast.html'>forecast</a></span>(<span class='no'>decomp</span>))</div><div class='img'><img src='forecast.stl-2.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>

<span class='fu'>plot</span>(<span class='fu'>stlf</span>(<span class='no'>AirPassengers</span>, <span class='kw'>lambda</span><span class='kw'>=</span><span class='fl'>0</span>))</div><div class='img'><img src='forecast.stl-3.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Rob J Hyndman

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://robjhyndman.com'>Rob Hyndman</a>, <a href='https://github.com/cbergmeir'>Christoph Bergmeir</a>, <a href='https://github.com/gabrielcaceres'>Gabriel Caceres</a>, <a href='https://github.com/mitchelloharawild'>Mitchell O'Hara-Wild</a>, <a href='https://github.com/slavarazbash'>Slava Razbash</a>, <a href='http://earo.me'>Earo Wang</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
